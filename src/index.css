/* AI Assistant Widget Styles */
@import './features/editor/ai-assistant/ai-widget.css';
@tailwind base;
@tailwind components;
@tailwind utilities;

html,
body,
#root {
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  overflow: hidden;
}

:root {
  --monaco-editor-left: 0px;
  --monaco-editor-width: 0px;
}

/*
 * Monaco quick input (Go to Symbol) positions relative to viewport when
 * fixedOverflowWidgets is enabled, so we center it within the editor bounds.
 */
.quick-input-widget {
  left: calc(var(--monaco-editor-left) + (var(--monaco-editor-width) / 2)) !important;
  transform: translateX(-50%) !important;
  right: auto !important;
  max-width: calc(var(--monaco-editor-width) - 24px) !important;
}

.custom-allotment {
  --separator-border: #dbdde1;
  --focus-border: #dbdde1;
}

.custom-allotment-dark {
  --separator-border: #5b6b86;
  --focus-border: #5b6b86;
}

@layer utilities {
  .custom-scroll-hidden {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .custom-scroll-hidden::-webkit-scrollbar {
    display: none;
  }
}

.mantine-Spotlight-actionsGroup::before {
  font-size: 12px;
  font-weight: 400;
  line-height: normal;
  text-transform: uppercase;
  color: #6f7785;
  margin-bottom: 4px;
  padding-left: 0;
}

[data-mantine-color-scheme='dark'] .mantine-Spotlight-actionsGroup::before {
  color: #a8b3c4;
}

.resizer {
  position: absolute;
  top: 0;
  height: 100%;
  right: 0px;
  width: 4px;
  cursor: col-resize;
  user-select: none;
  touch-action: none;
  opacity: 0;
  z-index: 9999;
}

.resizer.isResizing {
  opacity: 1;
}

.cm-editor {
  background: transparent;
  font-family: 'IBM Plex Mono', monospace !important;
}

.cm-content {
  font-family: 'IBM Plex Mono', monospace !important;
}

.cm-editor.cm-focused {
  outline: none;
}

.Í¼1 .cm-highlight-statement {
  border-left: 0px !important;
}

.cm-gutterElement {
  font-family: 'IBM Plex Mono', monospace;
  padding-left: 10px !important;
}

.cm-completionDetail {
  font-family: 'IBM Plex Mono', monospace;
  opacity: 0.6;
}

.cm-tooltip.cm-tooltip-cursor {
  background: #242b35;
  border: 1px solid #dbdde1;
  color: #fff;
  padding: 4px 8px;
  font-size: 14px;
  max-width: 300px;
}

.cm-completionIcon-database::after {
  content: url('/assets/database.svg');
}

.cm-completionIcon-table::after {
  content: url('/assets/table.svg');
}

.cm-completionIcon-schema::after {
  content: url('/assets/schema.svg');
}

[data-mantine-color-scheme='dark'] .cm-completionIcon-database::after {
  content: url('/assets/database-dark.svg');
}

[data-mantine-color-scheme='dark'] .cm-completionIcon-table::after {
  content: url('/assets/table-dark.svg');
}

[data-mantine-color-scheme='dark'] .cm-completionIcon-schema::after {
  content: url('/assets/schema-dark.svg');
}

/* Monaco semantic highlighting for SQL editor */
.monaco-table-name {
  color: var(--mantine-color-blue-6);
}

.monaco-cte-name {
  color: var(--mantine-color-cyan-6);
  font-style: italic;
}

.monaco-view-name {
  color: var(--mantine-color-teal-6);
}

.monaco-aggregated-column {
  color: var(--mantine-color-orange-6);
}

/* Dark mode overrides for Monaco semantic highlighting */
[data-mantine-color-scheme='dark'] .monaco-table-name {
  color: var(--mantine-color-blue-4);
}

[data-mantine-color-scheme='dark'] .monaco-cte-name {
  color: var(--mantine-color-cyan-4);
}

[data-mantine-color-scheme='dark'] .monaco-view-name {
  color: var(--mantine-color-teal-4);
}

[data-mantine-color-scheme='dark'] .monaco-aggregated-column {
  color: var(--mantine-color-orange-4);
}

/* Ensure Monaco widgets appear above all other UI elements */
.monaco-editor .parameter-hints-widget,
.monaco-editor .editor-hover,
.monaco-editor .suggest-widget {
  z-index: 10000 !important;
}

/*
 * Statement highlight for current cursor position.
 * Uses 5% opacity to provide subtle visual feedback without distracting
 * from the code. This opacity level is visible but doesn't interfere
 * with syntax highlighting colors.
 */
.monaco-statement-highlight {
  /* Fallback for browsers without color-mix() support */
  background-color: rgba(34, 139, 230, 0.05);
  background-color: color-mix(in srgb, var(--mantine-color-blue-filled) 5%, transparent);
}
